<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="~{admin/fragments :: head(~{::title})}">
    <title>Thêm Nhân viên</title>
</head>
<body>
<div class="d-flex" id="wrapper">
    <div th:replace="~{admin/fragments :: sidebar}"></div>
    <div id="page-content-wrapper">
        <div th:replace="~{admin/fragments :: top-nav}"></div>

        <div class="container mt-5" style="max-width: 600px;">
            <div class="card shadow">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">Tạo tài khoản mới</h4>
                    <a href="/admin/users" class="btn btn-sm btn-outline-light">Quay lại</a>
                </div>
                <div class="card-body">

                    <form th:action="@{/admin/users/save}" th:object="${user}" method="post">

                        <input type="hidden" th:field="*{id}">

                        <div class="mb-3">
                            <label class="form-label fw-bold">Họ và Tên:</label>
                            <input type="text" th:field="*{fullName}" class="form-control" required placeholder="Nguyễn Văn A">
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Số điện thoại:</label>
                            <input type="text" th:field="*{phone}" class="form-control" placeholder="09xxxxxxx">
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Email đăng nhập:</label>
                            <input type="email" th:field="*{email}" class="form-control"
                                   th:readonly="${user.id != null}"
                                   th:classappend="${user.id != null ? 'bg-light' : ''}" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Mật khẩu</label>

                            <input th:if="${user.id == null}" type="text" class="form-control" value="Mặc định: 123456" disabled>

                            <input th:if="${user.id != null}"
                                   type="password"
                                   name="newPassword"
                                   class="form-control"
                                   value=""
                                   autocomplete="new-password"
                                   placeholder="Nhập mật khẩu mới nếu muốn đổi (Để trống giữ nguyên)">
                        </div>

                        <div class="mb-4" sec:authorize="hasRole('ADMIN')">
                            <label class="form-label fw-bold">Phân quyền:</label>
                            <div class="d-flex gap-3">
                                <div th:each="role : ${listRoles}" class="form-check">
                                    <input class="form-check-input" type="checkbox"
                                           name="roleIds"
                                           th:value="${role.id}"
                                           th:checked="${user.roles != null and #lists.contains(user.roles, role)}">
                                    <label class="form-check-label" th:text="${role.name}"></label>
                                </div>
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-success">Lưu tài khoản</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="~{admin/fragments :: scripts}"></div>
</body>
</html>